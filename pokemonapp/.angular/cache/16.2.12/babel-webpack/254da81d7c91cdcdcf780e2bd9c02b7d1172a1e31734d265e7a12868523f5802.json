{"ast":null,"code":"import { SnackBarComponent } from '../snackBar/snack-bar.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/components/cards/service/card.service\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"@angular/common\";\nfunction StatsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"span\", 4);\n    i0.ɵɵtext(2, \"Cards Stats\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction StatsComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\")(2, \"div\", 6)(3, \"div\", 7)(4, \"div\", 8);\n    i0.ɵɵtext(5, \"Total of Cards\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 9)(7, \"span\", 10);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(9, \"div\")(10, \"div\", 6)(11, \"div\", 7)(12, \"div\", 8);\n    i0.ɵɵtext(13, \"Number of Decks\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"p\", 9)(15, \"span\", 10);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(17, \"div\")(18, \"div\", 6)(19, \"div\", 7)(20, \"div\", 8);\n    i0.ɵɵtext(21, \"Number of Cards Selected\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"p\", 9)(23, \"span\", 10);\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(25, \"div\")(26, \"div\", 6)(27, \"div\", 7)(28, \"div\", 8);\n    i0.ɵɵtext(29, \"Average HP\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"p\", 9)(31, \"span\", 10);\n    i0.ɵɵtext(32);\n    i0.ɵɵpipe(33, \"number\");\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(34, \"div\")(35, \"div\", 6)(36, \"div\", 7)(37, \"div\", 8);\n    i0.ɵɵtext(38, \"High Level Card\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(39, \"p\", 9)(40, \"span\", 10);\n    i0.ɵɵtext(41);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(42, \"div\")(43, \"div\", 6)(44, \"div\", 7)(45, \"div\", 8);\n    i0.ɵɵtext(46, \"Card Average Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(47, \"p\", 9)(48, \"span\", 10);\n    i0.ɵɵtext(49);\n    i0.ɵɵpipe(50, \"number\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.stats.totalOfCards, \" \");\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.stats.numberOfDecks, \" \");\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.stats.numberOfCardsSelected, \" \");\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(33, 6, ctx_r1.stats.totalHP / ctx_r1.stats.numberOfCardsSelected, \"1.0-0\"), \" \");\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.stats.highLevelCard, \" \");\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\" \\u20AC \", i0.ɵɵpipeBind2(50, 9, ctx_r1.stats.totalPrice / ctx_r1.stats.numberOfCardsSelected, \"1.0-2\"), \" \");\n  }\n}\nfunction StatsComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 12);\n    i0.ɵɵelement(2, \"div\", 13)(3, \"div\", 14);\n    i0.ɵɵelementEnd()();\n  }\n}\nlet StatsComponent = /*#__PURE__*/(() => {\n  class StatsComponent {\n    constructor($cardsService, _snackBar) {\n      this.$cardsService = $cardsService;\n      this._snackBar = _snackBar;\n      this.allCards = {\n        count: 0,\n        data: [],\n        page: 0,\n        pageSize: 0,\n        totalCount: 0\n      };\n      this.decks = [];\n      this.stats = {\n        totalOfCards: 0,\n        numberOfDecks: 0,\n        numberOfCardsSelected: 0,\n        totalHP: 0,\n        highLevelCard: 0,\n        totalPrice: 0\n      };\n      this.userEmail = '';\n      this.componentName = '';\n      this.durationInSeconds = 5;\n    }\n    ngOnInit() {\n      this.getAllCards();\n      this.getCardsByUser();\n    }\n    getAllCards() {\n      this.$cardsService.getAllCards().subscribe({\n        next: response => {\n          this.allCards = response;\n          this.stats.totalOfCards = this.allCards.count;\n        },\n        error: error => {\n          this.openSnackBar('Error retrieving Cards');\n        }\n      });\n    }\n    getCardsByUser() {\n      this.userEmail = localStorage.getItem('login') || '';\n      if (this.userEmail) {\n        this.$cardsService.getCardsByUser(this.userEmail).subscribe({\n          next: response => {\n            this.decks = response;\n            this.stats.numberOfDecks = this.decks.length;\n            this.getDeckStats(this.decks);\n          },\n          error: error => {\n            this.openSnackBar('Error retrieving Cards');\n          }\n        });\n      }\n    }\n    getDeckStats(decks) {\n      decks.forEach(deck => {\n        this.stats.numberOfCardsSelected += deck.cards.length;\n        deck.cards.forEach(card => {\n          this.stats.totalHP += Number(card.hp);\n          let currentLevel = Number(card['level']);\n          this.stats.highLevelCard = currentLevel > this.stats.highLevelCard ? currentLevel : this.stats.highLevelCard;\n          this.stats.totalPrice += card.cardmarket.prices.trendPrice;\n        });\n      });\n    }\n    openSnackBar(message) {\n      this._snackBar.openFromComponent(SnackBarComponent, {\n        duration: this.durationInSeconds * 1000,\n        data: {\n          message: message\n        }\n      });\n    }\n    static #_ = this.ɵfac = function StatsComponent_Factory(t) {\n      return new (t || StatsComponent)(i0.ɵɵdirectiveInject(i1.CardService), i0.ɵɵdirectiveInject(i2.MatSnackBar));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: StatsComponent,\n      selectors: [[\"app-stats\"]],\n      decls: 3,\n      vars: 3,\n      consts: [[\"class\", \"grid grid-cols-1 p-4\", 4, \"ngIf\"], [\"class\", \"grid space-x-1 lg:grid-cols-6 p-4 gap-2\", 4, \"ngIf\"], [\"class\", \"flex items-center justify-center h-screen\", 4, \"ngIf\"], [1, \"grid\", \"grid-cols-1\", \"p-4\"], [1, \"font-bold\", \"text-3xl\"], [1, \"grid\", \"space-x-1\", \"lg:grid-cols-6\", \"p-4\", \"gap-2\"], [1, \"bg-white\"], [1, \"px-6\", \"py-4\", \"bg-gray-100\", \"rounded\"], [1, \"font-bold\", \"text-xl\", \"mb-2\", \"text-center\"], [1, \"text-sm\", \"text-center\"], [1, \"font-normal\", \"text-4xl\", \"text-teal-500\"], [1, \"flex\", \"items-center\", \"justify-center\", \"h-screen\"], [1, \"relative\"], [1, \"h-24\", \"w-24\", \"rounded-full\", \"border-t-8\", \"border-b-8\", \"border-gray-200\"], [1, \"absolute\", \"top-0\", \"left-0\", \"h-24\", \"w-24\", \"rounded-full\", \"border-t-8\", \"border-b-8\", \"border-blue-500\", \"animate-spin\"]],\n      template: function StatsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, StatsComponent_div_0_Template, 3, 0, \"div\", 0);\n          i0.ɵɵtemplate(1, StatsComponent_div_1_Template, 51, 12, \"div\", 1);\n          i0.ɵɵtemplate(2, StatsComponent_div_2_Template, 4, 0, \"div\", 2);\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"ngIf\", ctx.stats.totalOfCards > 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.stats.totalOfCards > 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.stats.totalOfCards <= 0);\n        }\n      },\n      dependencies: [i3.NgIf, i3.DecimalPipe]\n    });\n  }\n  return StatsComponent;\n})();\nexport { StatsComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}